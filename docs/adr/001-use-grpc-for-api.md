# Организация gRPC сервисов

## Статус

Принят

## Контекст и постановка проблемы

Есть как минимум три канала взаимодействия между компонентами системы:

- API между микросервисами в рамках кластера;
- Публичное API между клиентом и кластером;
- Закрытое API между клиентом и кластером для отладочных/административных функций. 
 
Необходимо разработать схему использования gRPC сервисов для минимизации ошибок несанкционированного доступа.

### Выбранное решение

Самое простое - разделить разные каналы на разные сервисы в рамках gRPC. И зафиксировать правила наименования сервисов,
для минимизации ошибок доступа. Тогда helm чарты будут экспортировать нужные сервисы используя маску с подстановкой.

#### Наименование файлов для каналов

- {project_category.project_name}.internal.proto - для общения внутри кластера.
- {project_category.project_name}.external.proto - для общения между кластером и клиентом. Доступны для всех.
- {project_category.project_name}.admin.proto - для общения между кластером и клиентом для решения задач
  администрирования. Доступны только из определенных сетей или при локальной разработке.

Несмотря на то, что proto файлы и так сохраняются в каталоге вида project_category/project_name все равно в имени файла
необходимо продублировать и категорию и имя проекта, так как того требует генератор gRPC.

#### Наименование сервисов

Пакет совпадает с наименованием файлов proto.



