# Панель в Unity для отладки сетевых команд

Панель отображает сетевые команды от клиентов и от сервера для определенной игровой комнаты. Предназначается для отладки
и поиска ошибок. Панель работает только с локальным сервером, подключение к удаленному серверу на данный момент не
реализовано.

## Открытие панели

Меню Window/Cheetah/Debug network commands

## Начало работы

Для просмотра команд необходимо выбрать комнату в выпадающем списке. Комната должна быть создана игровым клиентом.

## Фильтрация

Так как команд в единицу времени много, то используется фильтрация для отображения необходимых команд. Фильтрация
основана на текстовых запросах.

### Поля запроса

- direction - направление команды, s2c - с сервера, с2s с клиента
- field - идентификатор поля
- template - идентификатор шаблона
- user - идентификатор пользователя
- id - идентификатор объекта
- owner - владелец, owner==room - комната, owner==user_id - пользователь

### Правила составления запроса

Поддерживаются условия &&, || и () для изменения приоритета выполнения.

- все команды с полем 55 и с объектом созданным пользователем номер 5 и с идентификатором 100
    ```
    field=55 && owner=5 && id=100
    ```
- все команды с сервера и с полем 100
    ```
    s2c && field=100    
    ```

- все команды с полем не равным 50
  ```
   field!=50
  ```

- все команды от сервера с полем 100 или команды от клиента с полем 50
  ```
  (s2c && field=100)||(c2s && field=50)
  ```

### Применение фильтрации

- фильтр применяется по нажатию на enter;
- есть история введенных фильтров, навигация - курсорные клавиши Up/Down;
- фильтр применяется к сохраненным командам на сервере, а не только к новым;
- сервер хранит только определенное число последних команд;